{% extends 'base.html' %}

{% block title %}{{ 'Crear Usuario' if action == 'crear' else 'Editar Usuario' }}{% endblock %}

{% block content %}
<h2>{{ 'Crear Nueva Cuenta' if action == 'crear' else 'Editar Usuario' }}</h2>

<div class="card form-card">
    
    <form method="POST" action="{% if action == 'editar' %}{{ url_for('admin_editar_usuario', user_id=user_data.id) }}{% else %}{{ url_for('admin_crear_usuario') }}{% endif %}">
        
        <div class="form-group">
            <label for="nombre">Nombre</label>
            <input type="text" name="nombre" class="form-control" required 
                   value="{{ user_data.nombre if action == 'editar' else '' }}">
        </div>
        
        <div class="form-group">
            <label for="email">Correo Electrónico</label>
            <input type="email" name="email" class="form-control" required 
                   value="{{ user_data.email if action == 'editar' else '' }}">
        </div>
        
        <div class="form-group">
            <label for="password">Contraseña {% if action == 'editar' %}(Dejar vacío para no cambiar){% endif %}</label>
            <input type="password" name="password" class="form-control" {% if action == 'crear' %}required{% endif %}>
        </div>
        
        <div class="form-group">
            <label for="rol">Rol de Acceso</label>
            <select name="rol" class="form-control" required>
                <option value="usuario" {% if action == 'editar' and not user_data.es_admin %}selected{% endif %}>Usuario Normal</option>
                <option value="admin" {% if action == 'editar' and user_data.es_admin %}selected{% endif %}>Administrador</option>
            </select>
        </div>
        
        <div class="form-actions">
            <a href="{{ url_for('admin_usuarios') }}" class="btn btn-secondary">Cancelar</a>
            <button type="submit" class="btn btn-primary">
                {{ 'Crear Cuenta' if action == 'crear' else 'Guardar Cambios' }}
            </button>
        </div>
    </form>
</div>
{% endblock %}